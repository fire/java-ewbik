import ewbik.processing.singlePrecision.Armature;
import ewbik.processing.singlePrecision.Bone;
import ewbik.processing.singlePrecision.IKPin;
import ewbik.processing.singlePrecision.sceneGraph.Axes;
import processing.core.PApplet;
import processing.core.PVector;
import processing.event.MouseEvent;
import java.util.Map;
import java.util.ArrayList;
import math.floatV.Rot;
import math.floatV.AbstractAxes;
import math.floatV.SGVec_3f;
import data.EWBIKSaver;

public class VRMExample_SinglePrecision extends PApplet {
	public static void main(String[] args) {

		PApplet.main("VRMExample_SinglePrecision");
	}

	public void settings() {
		size(1200, 900, P3D);
	}

	Armature simpleArmature;

	UI ui;

	ArrayList<IKPin> pins = new ArrayList<IKPin>();
	Axes worldAxes;

	IKPin activePin;

	Bone root;

	public void setup() {
		ui = new UI(this, false);
		simpleArmature = new Armature("VRMArmatureExample");
		worldAxes = (Axes) simpleArmature.localAxes().getParentAxes();
		if (worldAxes == null) {
			worldAxes = new Axes();
			simpleArmature.localAxes().setParent(worldAxes);
		}
		// attach the armature to the world axes (not necessary, just convenient)
		simpleArmature.localAxes().setParent(worldAxes);

		// specify that we want the solver to run 10 iteration whenever we call it.
		simpleArmature.setDefaultIterations(10);
		// specify the maximum amount any bone is allowed to rotate per iteration
		// (slower convergence, nicer results)
		simpleArmature.setDefaultDampening(10f);
		// benchmark performance
		simpleArmature.setPerformanceMonitor(true);

		// Add some bones to the armature
		initializeBones();

		// add the pins/targets to an array so we can cycle through them easily with
		// keyboad input.
		updatePinList();
	}

	public void draw() {
		if (mousePressed) {
			ui.mouse.z = (float) activePin.getAxes().origin_().z;
			activePin.translateTo(new PVector(ui.mouse.x, ui.mouse.y, activePin.getLocation_().z));
			simpleArmature.IKSolver(simpleArmature.getRootBone());
		} else {
			worldAxes.rotateAboutY(PI / 200f, true);
		}
		String additionalInstructions = "\n HIT THE S KEY TO SAVE THE CURRENT ARMATURE CONFIGURATION.";
		ui.drawScene(0.4f, 30f, null, simpleArmature, additionalInstructions, activePin, null, false);
	}

	PVector mouse = new PVector(0, 0, 0);

	public void mouseWheel(MouseEvent event) {
		float e = event.getCount();
		if (event.isShiftDown()) {
			activePin.getAxes().rotateAboutZ(e / TAU, true);
		} else if (event.isControlDown()) {
			activePin.getAxes().rotateAboutX(e / TAU, true);
		} else {
			activePin.getAxes().rotateAboutY(e / TAU, true);
		}
		activePin.solveIKForThisAndChildren();
	}

	public void keyPressed() {
		if (key == CODED) {
			if (keyCode == DOWN) {
				int currentPinIndex = (pins.indexOf(activePin) + 1) % pins.size();
				activePin = pins.get(currentPinIndex);
			} else if (keyCode == UP) {
				int idx = pins.indexOf(activePin);
				int currentPinIndex = (pins.size() - 1) - (((pins.size() - 1) - (idx - 1)) % pins.size());
				activePin = pins.get(currentPinIndex);
			}
		} else if (key == 's') {
			println("Saving");
			EWBIKSaver newSaver = new EWBIKSaver();
			newSaver.saveArmature(simpleArmature, "VRM_Humanoid.arm");
		}
	}

	Map<String, Bone> boneMap = new java.util.HashMap<String, Bone>();

	public void addBone(String name, String parentName, double height) {
		Bone bone = new Bone(boneMap.get(parentName),
				name,
				(float) (height * 100.0f));
		boneMap.put(name, bone);
	}

	public void addPin(String name, double x, double y, double z, double qX, double qY, double qZ, double qW) {
		Bone bone = boneMap.get(name);
		bone.enablePin();
		Rot rot = new Rot(new math.floatV.MRotation((float) qX, (float) qY, (float) qZ, (float) qW));
		bone.rotateBy(rot);
		IKPin pin = bone.getIKPin();
		pin.translateTo(new PVector((float) x, (float) z, (float) y));
		pin.solveIKForThisAndChildren();
	}

	public void initializeBones() {
		root = simpleArmature.getRootBone();
		root.localAxes().markDirty();
		root.localAxes().updateGlobal();
		boneMap.put("", root);
		addBone("J_Bip_C_Hips", "", 0);
		addPin("J_Bip_C_Hips", -0.00021769267914, 0.89399206638336, 0.00574204465374, 0.0000004429109, 0.05205869674683,
				0.998644053936, -0.00000053128787);
		addBone("J_Bip_C_Spine", "J_Bip_C_Hips", -0.05291378498077);
		addPin("J_Bip_C_Spine", -0.00021768458828, 0.94690585136414, 0.01556666009128, 0.00000007435283,
				0.99808877706528, 0.06179613992572, 0.00000000366178);
		addBone("J_Bip_C_Chest", "J_Bip_C_Spine", -0.11398756504059);
		addPin("J_Bip_C_Chest", -0.00021766760619, 1.06089341640472, 0.02973594143987, -0.00000005193981,
				0.99850177764893, -0.05471961945295, 0.00000002757341);
		addBone("J_Bip_C_UpperChest", "J_Bip_C_Chest", -0.12410283088684);
		addPin("J_Bip_C_UpperChest", -0.00021768017905, 1.18499624729156, 0.01609285734594, -0.00000005251419,
				0.99799925088882, 0.06322593986988, 0.00000001805589);
		addBone("J_Sec_L_Bust1", "J_Bip_C_UpperChest", 0.02721226215363);
		addPin("J_Sec_L_Bust1", 0.05332335457206, 1.15778398513794, 0.07516348361969, 0.16269917786121,
				0.72265666723251, 0.65178620815277, -0.16269926726818);
		addBone("J_Sec_L_Bust2", "J_Sec_L_Bust1", -0.00304269790649);
		addPin("J_Sec_L_Bust2", 0.06729425489902, 1.16082668304443, 0.1029369533062, 0.16269919276237, 0.72265666723251,
				0.65178620815277, -0.16269926726818);
		addBone("J_Sec_R_Bust1", "J_Bip_C_UpperChest", 0.02721226215363);
		addPin("J_Sec_R_Bust1", -0.05375868082047, 1.15778398513794, 0.07516347616911, -0.16269908845425,
				0.72265666723251, 0.65178632736206, 0.16269901394844);
		addBone("J_Sec_R_Bust2", "J_Sec_R_Bust1", -0.00304269790649);
		addPin("J_Sec_R_Bust2", -0.06772956997156, 1.16082668304443, 0.1029369905591, -0.16269905865192,
				0.72265666723251, 0.65178632736206, 0.16269908845425);
		addBone("J_Bip_C_Neck", "J_Bip_C_UpperChest", -0.11461532115936);
		addPin("J_Bip_C_Neck", -0.00021769250452, 1.29961156845093, -0.01730279438198, 0.00000015185593,
				0.99794691801071, 0.06404704600573, -0.00000014131395);
		addBone("J_Bip_C_Head", "J_Bip_C_Neck", -0.07220935821533);
		addPin("J_Bip_C_Head", -0.00021766169812, 1.37182092666626, -0.00799585226923, -0.03117566555738,
				0.99894958734512, -0.01248510275036, 0.03117572143674);
		addBone("J_Adj_L_FaceEye", "J_Bip_C_Head", -0.06215047836304);
		addPin("J_Adj_L_FaceEye", 0.02061993815005, 1.4339714050293, 0.020363971591, -0.03117565438151,
				0.99894958734512, -0.01248497050256, 0.03117576427758);
		addBone("J_Adj_R_FaceEye", "J_Bip_C_Head", -0.06215059757233);
		addPin("J_Adj_R_FaceEye", -0.02105517312884, 1.43397152423859, 0.02036400139332, -0.0311756581068,
				0.99894958734512, -0.01248495746404, 0.03117576055229);
		addBone("HairJoint-90bd578a-0a02-4b1d-8448-1d427c264eb8", "J_Bip_C_Head", -0.09255182743073);
		addPin("HairJoint-90bd578a-0a02-4b1d-8448-1d427c264eb8", -0.08816158771515, 1.46437275409698, 0.04886228591204,
				-0.00022246476146, -0.06696053594351, 0.99775558710098, 0.0002239523601);
		addBone("HairJoint-f109139e-4b37-4b37-8753-4e9d3d78c518", "HairJoint-90bd578a-0a02-4b1d-8448-1d427c264eb8",
				0.03149402141571);
		addPin("HairJoint-f109139e-4b37-4b37-8753-4e9d3d78c518", -0.08817490935326, 1.43287873268127, 0.04461599141359,
				0.10280126333237, -0.03890031948686, 0.98861056566238, -0.10279976576567);
		addBone("HairJoint-680f2639-47ad-4a44-bfba-84a7656b4e4c", "HairJoint-f109139e-4b37-4b37-8753-4e9d3d78c518",
				0.03096675872803);
		addPin("HairJoint-680f2639-47ad-4a44-bfba-84a7656b4e4c", -0.08197864890099, 1.40191197395325, 0.04150450229645,
				0.17978991568089, 0.01271848101169, 0.96705240011215, -0.17978745698929);
		addBone("HairJoint-a522c3e7-8e05-43be-9725-cc9633356a6e", "HairJoint-680f2639-47ad-4a44-bfba-84a7656b4e4c",
				0.02975130081177);
		addPin("HairJoint-a522c3e7-8e05-43be-9725-cc9633356a6e", -0.07076886296272, 1.37216067314148, 0.04023015126586,
				0.17979007959366, 0.01271845493466, 0.96705234050751, -0.17978748679161);
		addBone("HairJoint-8f75599b-6719-4a23-9df3-7bafb987c83e", "J_Bip_C_Head", -0.09071850776672);
		addPin("HairJoint-8f75599b-6719-4a23-9df3-7bafb987c83e", 0.09087797999382, 1.46253943443298, 0.04937694966793,
				-0.00341172353365, -0.07252575457096, 0.99735486507416, 0.00341233774088);
		addBone("HairJoint-62725a20-77c6-4e3f-9c16-d67a06847f32", "HairJoint-8f75599b-6719-4a23-9df3-7bafb987c83e",
				0.02822291851044);
		addPin("HairJoint-62725a20-77c6-4e3f-9c16-d67a06847f32", 0.09069794416428, 1.43431651592255, 0.04524983465672,
				-0.11126700788736, -0.01986941881478, 0.98734223842621, 0.11126653850079);
		addBone("HairJoint-adc6646e-d1b4-414d-95cc-2b34441a9b08", "HairJoint-62725a20-77c6-4e3f-9c16-d67a06847f32",
				0.02760434150696);
		addPin("HairJoint-adc6646e-d1b4-414d-95cc-2b34441a9b08", 0.08459901064634, 1.40671217441559, 0.04343689978123,
				-0.20093074440956, 0.08889801800251, 0.95464730262756, 0.2009292691946);
		addBone("HairJoint-94107030-a1ca-47cf-bad8-55e241b853fc", "HairJoint-adc6646e-d1b4-414d-95cc-2b34441a9b08",
				0.02578449249268);
		addPin("HairJoint-94107030-a1ca-47cf-bad8-55e241b853fc", 0.07263058423996, 1.38092768192291, 0.0459766574204,
				-0.20093129575253, 0.08889807760715, 0.95464718341827, 0.2009292691946);
		addBone("HairJoint-dfbbe1f8-551f-494e-92b1-f31602e51ce5", "J_Bip_C_Head", -0.15989911556244);
		addPin("HairJoint-dfbbe1f8-551f-494e-92b1-f31602e51ce5", -0.02766855061054, 1.5317200422287, 0.07999970763922,
				-0.06149582192302, 0.15325322747231, 0.98435264825821, 0.06149467080832);
		addBone("HairJoint-bdc09e40-dd31-41b2-a7db-18229e902446", "HairJoint-dfbbe1f8-551f-494e-92b1-f31602e51ce5",
				0.03945660591125);
		addPin("HairJoint-bdc09e40-dd31-41b2-a7db-18229e902446", -0.03350741043687, 1.49226343631744, 0.09227512776852,
				0.10278872400522, -0.00416036881506, 0.98936927318573, -0.10278893262148);
		addBone("HairJoint-eeeeee4b-dc6b-4362-a7b1-401b207aaef1", "HairJoint-bdc09e40-dd31-41b2-a7db-18229e902446",
				0.04026257991791);
		addPin("HairJoint-eeeeee4b-dc6b-4362-a7b1-401b207aaef1", -0.0251764152199, 1.45200085639954, 0.09106732904911,
				0.10278930515051, -0.00416016066447, 0.98936927318573, -0.10278886556625);
		addBone("HairJoint-392d3846-d81f-4440-b15c-f874adf10bf3", "J_Bip_C_Head", -0.11973774433136);
		addPin("HairJoint-392d3846-d81f-4440-b15c-f874adf10bf3", -0.00447208294645, 1.49155867099762, 0.09815958887339,
				0.3275970518589, 0.09990808367729, 0.88055628538132, -0.32759603857994);
		addBone("HairJoint-541ba6e5-f44e-4e6f-813f-e5e9dd48f1d2", "HairJoint-392d3846-d81f-4440-b15c-f874adf10bf3",
				0.02626323699951);
		addPin("HairJoint-541ba6e5-f44e-4e6f-813f-e5e9dd48f1d2", 0.01757049374282, 1.46529543399811, 0.0968321710825,
				-0.51010817289352, -0.11414851248264, -0.68304532766342, 0.51010674238205);
		addBone("HairJoint-cce96e42-96cb-4df6-bb4f-b04dad7c38f2", "HairJoint-541ba6e5-f44e-4e6f-813f-e5e9dd48f1d2",
				0.01578748226166);
		addPin("HairJoint-cce96e42-96cb-4df6-bb4f-b04dad7c38f2", 0.04588185250759, 1.44950795173645, 0.08414441347122,
				-0.51010799407959, -0.11414855718613, -0.68304538726807, 0.51010680198669);
		addBone("HairJoint-a310b619-0bf0-4230-9a7e-048e179c674f", "J_Bip_C_Head", -0.09937953948975);
		addPin("HairJoint-a310b619-0bf0-4230-9a7e-048e179c674f", -0.10578479617834, 1.47120046615601, 0.00817425269634,
				-0.00606429157779, 0.05500023066998, 0.99844950437546, 0.00606589019299);
		addBone("HairJoint-77a35cd5-4c34-4d23-a5dc-dc28936549e7", "HairJoint-a310b619-0bf0-4230-9a7e-048e179c674f",
				0.07383632659912);
		addPin("HairJoint-77a35cd5-4c34-4d23-a5dc-dc28936549e7", -0.10673424601555, 1.39736413955688, 0.01632819324732,
				-0.0166969653219, 0.12947238981724, 0.99130177497864, 0.01669901050627);
		addBone("HairJoint-89977a5b-eca4-482f-bf31-3ec0dd04073f", "HairJoint-77a35cd5-4c34-4d23-a5dc-dc28936549e7",
				0.07205975055695);
		addPin("HairJoint-89977a5b-eca4-482f-bf31-3ec0dd04073f", -0.10952670872211, 1.32530438899994, 0.0354365259409,
				-0.0337522700429, 0.22725766897202, 0.97266405820847, 0.03375461697578);
		addBone("HairJoint-c3f8d95c-bf57-47e1-b128-220106560b83", "HairJoint-89977a5b-eca4-482f-bf31-3ec0dd04073f",
				0.0667450428009);
		addPin("HairJoint-c3f8d95c-bf57-47e1-b128-220106560b83", -0.11557152867317, 1.25855934619904, 0.06825660169125,
				-0.05847252905369, 0.15872201323509, 0.98385417461395, 0.05847516655922);
		addBone("HairJoint-efba079c-5d1f-45a5-9ce8-17bc52ce1b6d", "HairJoint-c3f8d95c-bf57-47e1-b128-220106560b83",
				0.07024216651917);
		addPin("HairJoint-efba079c-5d1f-45a5-9ce8-17bc52ce1b6d", -0.12552723288536, 1.18831717967987, 0.09101662784815,
				-0.02478340826929, 0.03010030835867, 0.9989321231842, 0.0247856285423);
		addBone("HairJoint-322cd38e-4793-4e4b-bf6b-e96409e8b36d", "HairJoint-efba079c-5d1f-45a5-9ce8-17bc52ce1b6d",
				0.07385909557343);
		addPin("HairJoint-322cd38e-4793-4e4b-bf6b-e96409e8b36d", -0.12930637598038, 1.11445808410645, 0.09538083523512,
				0.2016127705574, 0.01123323757201, 0.95842558145523, -0.20160979032516);
		addBone("HairJoint-83f3f5bc-129a-4c3e-b86e-a56d0255125b", "HairJoint-322cd38e-4793-4e4b-bf6b-e96409e8b36d",
				0.06588041782379);
		addPin("HairJoint-83f3f5bc-129a-4c3e-b86e-a56d0255125b", -0.10126107186079, 1.04857766628265, 0.0910941362381,
				0.20160888135433, 0.01123263128102, 0.95842641592026, -0.20160983502865);
		addBone("HairJoint-6deb6877-fcff-46fe-bc75-d22ca1f14910", "J_Bip_C_Head", -0.10172736644745);
		addPin("HairJoint-6deb6877-fcff-46fe-bc75-d22ca1f14910", 0.10529051721096, 1.47354829311371, 0.00998335238546,
				0.01932165771723, 0.04677024483681, 0.99853187799454, -0.01932210475206);
		addBone("HairJoint-9eb00ccd-38c7-451b-9599-0eaa08be6ba1", "HairJoint-6deb6877-fcff-46fe-bc75-d22ca1f14910",
				0.07421147823334);
		addPin("HairJoint-9eb00ccd-38c7-451b-9599-0eaa08be6ba1", 0.10830372571945, 1.39933681488037, 0.01689489372075,
				0.01733702979982, 0.12609395384789, 0.99171531200409, -0.01733640767634);
		addBone("HairJoint-68191422-fc7e-4fa9-b73a-298116387a84", "HairJoint-9eb00ccd-38c7-451b-9599-0eaa08be6ba1",
				0.07242047786713);
		addPin("HairJoint-68191422-fc7e-4fa9-b73a-298116387a84", 0.11120458692312, 1.32691633701324, 0.03556860610843,
				0.03442111983895, 0.22346310317516, 0.97349607944489, -0.03442027419806);
		addBone("HairJoint-d6cd70e1-6dbe-4c49-af01-556ba12c170a", "HairJoint-68191422-fc7e-4fa9-b73a-298116387a84",
				0.06722950935364);
		addPin("HairJoint-d6cd70e1-6dbe-4c49-af01-556ba12c170a", 0.11737517267466, 1.25968682765961, 0.06797258555889,
				0.06086160987616, 0.15527015924454, 0.98411536216736, -0.06086037307978);
		addBone("HairJoint-1913442e-ff98-4f32-8645-e8846532595b", "HairJoint-d6cd70e1-6dbe-4c49-af01-556ba12c170a",
				0.07060885429382);
		addPin("HairJoint-1913442e-ff98-4f32-8645-e8846532595b", 0.12774455547333, 1.18907797336578, 0.09026829153299,
				0.02901056222618, 0.02669231034815, 0.99880146980286, -0.02900925651193);
		addBone("HairJoint-8a04603a-b28d-4640-8dbc-cf8838598dac", "HairJoint-1913442e-ff98-4f32-8645-e8846532595b",
				0.07411086559296);
		addPin("HairJoint-8a04603a-b28d-4640-8dbc-cf8838598dac", 0.13216775655746, 1.11496710777283, 0.09410712867975,
				-0.19796003401279, 0.00773640023544, 0.95998132228851, 0.19795918464661);
		addBone("HairJoint-6b13c95d-2883-48a1-9dbe-0685b91916d2", "HairJoint-8a04603a-b28d-4640-8dbc-cf8838598dac",
				0.06630599498749);
		addPin("HairJoint-6b13c95d-2883-48a1-9dbe-0685b91916d2", 0.10459934920073, 1.04866111278534, 0.08953639119864,
				-0.19796255230904, 0.00773694412783, 0.95998084545135, 0.19795903563499);
		addBone("HairJoint-107f3507-9ea5-45fa-9b53-84621a1eb5b3", "J_Bip_C_Head", -0.10339200496674);
		addPin("HairJoint-107f3507-9ea5-45fa-9b53-84621a1eb5b3", 0.09694212675095, 1.475212931633, -0.05796754732728,
				0.01194928772748, -0.0490796007216, 0.99865198135376, -0.01194542460144);
		addBone("HairJoint-aa9b8371-0add-42c2-b9b6-98e1a2808777", "HairJoint-107f3507-9ea5-45fa-9b53-84621a1eb5b3",
				0.08038330078125);
		addPin("HairJoint-aa9b8371-0add-42c2-b9b6-98e1a2808777", 0.09877499192953, 1.39482963085175, -0.0659107491374,
				0.05890714377165, -0.03892671316862, 0.99576354026794, -0.05890350416303);
		addBone("HairJoint-007aaf43-eb82-424f-8a34-48fcf5554284", "HairJoint-aa9b8371-0add-42c2-b9b6-98e1a2808777",
				0.0800062417984);
		addPin("HairJoint-007aaf43-eb82-424f-8a34-48fcf5554284", 0.10788425058126, 1.31482338905334, -0.0727363973856,
				0.10206926614046, -0.05921996757388, 0.98775386810303, -0.10206459462643);
		addBone("HairJoint-81e2da33-085b-4f39-bbf5-1656c3d334f1", "HairJoint-007aaf43-eb82-424f-8a34-48fcf5554284",
				0.0785323381424);
		addPin("HairJoint-81e2da33-085b-4f39-bbf5-1656c3d334f1", 0.12319574505091, 1.23629105091095, -0.08387017250061,
				0.06264092028141, -0.06037369370461, 0.99423730373383, -0.06263612210751);
		addBone("HairJoint-e5bfc70a-492d-4ce5-8413-7ffec583d369", "HairJoint-81e2da33-085b-4f39-bbf5-1656c3d334f1",
				0.0794734954834);
		addPin("HairJoint-e5bfc70a-492d-4ce5-8413-7ffec583d369", 0.13263604044914, 1.15681755542755, -0.09419095516205,
				-0.05832503736019, 0.01600655727088, 0.99646365642548, 0.05832803249359);
		addBone("HairJoint-ccc7c278-f57e-45de-958c-2f68c1117ce8", "HairJoint-e5bfc70a-492d-4ce5-8413-7ffec583d369",
				0.07942378520966);
		addPin("HairJoint-ccc7c278-f57e-45de-958c-2f68c1117ce8", 0.12318610399961, 1.0773937702179, -0.0921830162406,
				-0.20089566707611, 0.15966506302357, 0.94540423154831, 0.20089507102966);
		addBone("HairJoint-1c3e4998-41f0-4f49-8c38-b258b38dd42b", "HairJoint-ccc7c278-f57e-45de-958c-2f68c1117ce8",
				0.06824350357056);
		addPin("HairJoint-1c3e4998-41f0-4f49-8c38-b258b38dd42b", 0.08828981220722, 1.00915026664734, -0.07479957491159,
				-0.20089769363403, 0.15966555476189, 0.94540387392044, 0.2008945941925);
		addBone("HairJoint-37c33eb9-3507-42a8-9cd9-f9455401fa65", "J_Bip_C_Head", -0.11585354804993);
		addPin("HairJoint-37c33eb9-3507-42a8-9cd9-f9455401fa65", 0.06231614202261, 1.48767447471619, -0.10143903642893,
				0.01851574704051, -0.06447780877352, 0.99757558107376, -0.01851509697735);
		addBone("HairJoint-3c010761-3591-41a8-8130-4d664717082a", "HairJoint-37c33eb9-3507-42a8-9cd9-f9455401fa65",
				0.08119058609009);
		addPin("HairJoint-3c010761-3591-41a8-8130-4d664717082a", 0.06514696776867, 1.4064838886261, -0.11203466355801,
				0.05339128896594, -0.04742856696248, 0.99601674079895, -0.05339113995433);
		addBone("HairJoint-fa6b7b01-b300-4ac3-81fe-7d3ba21ac8e6", "HairJoint-3c010761-3591-41a8-8130-4d664717082a",
				0.08112275600433);
		addPin("HairJoint-fa6b7b01-b300-4ac3-81fe-7d3ba21ac8e6", 0.07344878464937, 1.32536113262177, -0.12024531513453,
				0.07005595415831, -0.06816853582859, 0.99274235963821, -0.07005576044321);
		addBone("HairJoint-1e949c49-ec03-429b-b0a7-0261b03db3a2", "HairJoint-fa6b7b01-b300-4ac3-81fe-7d3ba21ac8e6",
				0.08038437366486);
		addPin("HairJoint-1e949c49-ec03-429b-b0a7-0261b03db3a2", 0.08406493812799, 1.24497675895691, -0.1321415156126,
				0.07668527960777, -0.05050045251846, 0.99281847476959, -0.07668487727642);
		addBone("HairJoint-96290158-52f8-488d-9b08-f9110667a9f7", "HairJoint-1e949c49-ec03-429b-b0a7-0261b03db3a2",
				0.08057129383087);
		addPin("HairJoint-96290158-52f8-488d-9b08-f9110667a9f7", 0.09590911120176, 1.16440546512604, -0.14132329821587,
				-0.00976382661611, 0.01441456470639, 0.99980074167252, 0.00976443570107);
		addBone("HairJoint-f58ad0cb-bdfd-41b4-8155-fee00d1df7d8", "HairJoint-96290158-52f8-488d-9b08-f9110667a9f7",
				0.08126986026764);
		addPin("HairJoint-f58ad0cb-bdfd-41b4-8155-fee00d1df7d8", 0.09429845958948, 1.0831356048584, -0.13899484276772,
				-0.19961215555668, 0.24980476498604, 0.9262330532074, 0.19961178302765);
		addBone("HairJoint-0bcab563-4a71-4571-9530-c2b985c8923e", "HairJoint-f58ad0cb-bdfd-41b4-8155-fee00d1df7d8",
				0.06315517425537);
		addPin("HairJoint-0bcab563-4a71-4571-9530-c2b985c8923e", 0.05702459812164, 1.01998043060303, -0.108583368361,
				-0.19961331784725, 0.24980494379997, 0.92623287439346, 0.19961142539978);
		addBone("HairJoint-5b3aad15-5789-4e03-a22c-dc4a8ac737fc", "J_Bip_C_Head", -0.12382662296295);
		addPin("HairJoint-5b3aad15-5789-4e03-a22c-dc4a8ac737fc", 0.02147443965077, 1.49564754962921, -0.11966171860695,
				0.01126879639924, -0.08490934222937, 0.99626123905182, -0.01126813702285);
		addBone("HairJoint-c1387f3e-2264-495d-9936-38ec269687f9", "HairJoint-5b3aad15-5789-4e03-a22c-dc4a8ac737fc",
				0.08138751983643);
		addPin("HairJoint-c1387f3e-2264-495d-9936-38ec269687f9", 0.02317089401186, 1.41426002979279, -0.13365717232227,
				0.0213294941932, -0.06882494688034, 0.99717259407043, -0.02132964134216);
		addBone("HairJoint-af6db5bf-0e71-4b07-a880-5df40862fd82", "HairJoint-c1387f3e-2264-495d-9936-38ec269687f9",
				0.08176600933075);
		addPin("HairJoint-af6db5bf-0e71-4b07-a880-5df40862fd82", 0.02644303813577, 1.33249402046204, -0.14507341384888,
				0.03430672362447, -0.08612585812807, 0.99510222673416, -0.03430695086718);
		addBone("HairJoint-b408526e-fe10-495a-96cb-2d9c5187cbc0", "HairJoint-af6db5bf-0e71-4b07-a880-5df40862fd82",
				0.08119761943817);
		addPin("HairJoint-b408526e-fe10-495a-96cb-2d9c5187cbc0", 0.03159580007195, 1.25129640102386, -0.15942931175232,
				0.04327639564872, -0.07871775329113, 0.99501651525497, -0.04327661916614);
		addBone("HairJoint-4c42ec04-0044-428a-a8e9-c793cbcec0bb", "HairJoint-b408526e-fe10-495a-96cb-2d9c5187cbc0",
				0.08129382133484);
		addPin("HairJoint-4c42ec04-0044-428a-a8e9-c793cbcec0bb", 0.03814888373017, 1.17000257968903, -0.17268246412277,
				-0.010458573699, -0.00214442657307, 0.99988830089569, 0.01045881025493);
		addBone("HairJoint-6cc8da24-6252-4da0-b676-35be7e96ed79", "HairJoint-4c42ec04-0044-428a-a8e9-c793cbcec0bb",
				0.08220088481903);
		addPin("HairJoint-6cc8da24-6252-4da0-b676-35be7e96ed79", 0.03643294796348, 1.08780169487, -0.17305311560631,
				-0.10170588642359, 0.2934063076973, 0.94510555267334, 0.10170591622591);
		addBone("HairJoint-a9eb6fa3-34cb-47a0-bc1a-fab074c5f878", "HairJoint-6cc8da24-6252-4da0-b676-35be7e96ed79",
				0.06386363506317);
		addPin("HairJoint-a9eb6fa3-34cb-47a0-bc1a-fab074c5f878", 0.01649928838015, 1.02393805980682, -0.13080795109272,
				-0.10170613229275, 0.29340606927872, 0.94510567188263, 0.10170588642359);
		addBone("HairJoint-cca2506d-3f96-4535-a063-48a37b90440d", "J_Bip_C_Head", -0.11617338657379);
		addPin("HairJoint-cca2506d-3f96-4535-a063-48a37b90440d", -0.04983710497618, 1.48799431324005, -0.10914085060358,
				-0.00807117298245, -0.07180416584015, 0.99735343456268, 0.00807067099959);
		addBone("HairJoint-4f99b74b-927e-46e1-8c69-c2bde8f7d31e", "HairJoint-cca2506d-3f96-4535-a063-48a37b90440d",
				0.08077120780945);
		addPin("HairJoint-4f99b74b-927e-46e1-8c69-c2bde8f7d31e", -0.05105652660131, 1.4072231054306, -0.12084227800369,
				-0.03675737977028, -0.05806954950094, 0.99695825576782, 0.0367561429739);
		addBone("HairJoint-acafa350-4910-44a8-985e-53b227d57664", "HairJoint-4f99b74b-927e-46e1-8c69-c2bde8f7d31e",
				0.08087944984436);
		addPin("HairJoint-acafa350-4910-44a8-985e-53b227d57664", -0.05669203773141, 1.32634365558624, -0.13051687180996,
				-0.05157832056284, -0.07609430700541, 0.99442905187607, 0.05157724767923);
		addBone("HairJoint-c04b567f-6679-4b9f-8082-26bf4c62c175", "HairJoint-acafa350-4910-44a8-985e-53b227d57664",
				0.08024084568024);
		addPin("HairJoint-c04b567f-6679-4b9f-8082-26bf4c62c175", -0.06442392617464, 1.24610280990601, -0.14330364763737,
				-0.04431429505348, -0.07011310756207, 0.99556851387024, 0.04431322962046);
		addBone("HairJoint-c04e1484-898b-4183-9b98-cbbe1bcb8f1b", "HairJoint-c04b567f-6679-4b9f-8082-26bf4c62c175",
				0.08053696155548);
		addPin("HairJoint-c04e1484-898b-4183-9b98-cbbe1bcb8f1b", -0.07112169265747, 1.16556584835052, -0.15502460300922,
				0.01929327659309, 0.00129629042931, 0.99962681531906, -0.01929452642798);
		addBone("HairJoint-5b01b064-9385-4e1f-b280-0671cd26601e", "HairJoint-c04e1484-898b-4183-9b98-cbbe1bcb8f1b",
				0.08104419708252);
		addPin("HairJoint-5b01b064-9385-4e1f-b280-0671cd26601e", -0.06798906624317, 1.08452165126801, -0.15487478673458,
				0.09558762609959, 0.2899018228054, 0.94746118783951, -0.09558891505003);
		addBone("HairJoint-46f69a8b-848e-4ce6-8483-d3eeaea3d479", "HairJoint-5b01b064-9385-4e1f-b280-0671cd26601e",
				0.06359875202179);
		addPin("HairJoint-46f69a8b-848e-4ce6-8483-d3eeaea3d479", -0.04949843138456, 1.02092289924622, -0.11336332559586,
				0.09558793157339, 0.28990158438683, 0.94746124744415, -0.09558885544538);
		addBone("HairJoint-2ac6f20d-e294-48b8-94e8-7c45a56dc354", "J_Bip_C_Head", -0.10276174545288);
		addPin("HairJoint-2ac6f20d-e294-48b8-94e8-7c45a56dc354", -0.08973779529333, 1.47458267211914, -0.0696848705411,
				-0.00440836092457, -0.04985320568085, 0.99873715639114, 0.00440865755081);
		addBone("HairJoint-f128faad-640f-402b-af31-26a018cdb9ce", "HairJoint-2ac6f20d-e294-48b8-94e8-7c45a56dc354",
				0.07995927333832);
		addPin("HairJoint-f128faad-640f-402b-af31-26a018cdb9ce", -0.09041015058756, 1.39462339878082, -0.07769045978785,
				-0.04995911568403, -0.04082587733865, 0.99666523933411, 0.04995784908533);
		addBone("HairJoint-741f7592-b5be-43b4-92c7-66a9400c25bc", "HairJoint-f128faad-640f-402b-af31-26a018cdb9ce",
				0.07970654964447);
		addPin("HairJoint-741f7592-b5be-43b4-92c7-66a9400c25bc", -0.09808634966612, 1.31491684913635, -0.08463260531425,
				-0.08286122977734, -0.05488516762853, 0.99159264564514, 0.08285910636187);
		addBone("HairJoint-9bf2d79a-8294-415c-ac76-ef4363d7c8d5", "HairJoint-741f7592-b5be-43b4-92c7-66a9400c25bc",
				0.0787650346756);
		addPin("HairJoint-9bf2d79a-8294-415c-ac76-ef4363d7c8d5", -0.11055951565504, 1.23615181446075, -0.09448216855526,
				-0.0463338829577, -0.06019524857402, 0.99603366851807, 0.04633190855384);
		addBone("HairJoint-1699c4be-0bb6-4a6f-83f5-cb246f0c3f57", "HairJoint-9bf2d79a-8294-415c-ac76-ef4363d7c8d5",
				0.07937240600586);
		addPin("HairJoint-1699c4be-0bb6-4a6f-83f5-cb246f0c3f57", -0.11752294749022, 1.1567794084549, -0.10445582866669,
				0.05121483281255, 0.01193732768297, 0.99730211496353, -0.05121545866132);
		addBone("HairJoint-f766989a-0828-4d48-8209-8686b77d2406", "HairJoint-1699c4be-0bb6-4a6f-83f5-cb246f0c3f57",
				0.07923054695129);
		addPin("HairJoint-f766989a-0828-4d48-8209-8686b77d2406", -0.10928673297167, 1.0775488615036, -0.10297682881355,
				0.18104660511017, 0.156768232584, 0.95387023687363, -0.18104527890682);
		addBone("HairJoint-65645048-bdae-4388-a4ba-ebee4813f659", "HairJoint-f766989a-0828-4d48-8209-8686b77d2406",
				0.06904816627502);
		addPin("HairJoint-65645048-bdae-4388-a4ba-ebee4813f659", -0.07792104780674, 1.00850069522858, -0.08476367592812,
				0.18104712665081, 0.15676829218864, 0.95387017726898, -0.18104518949986);
		addBone("HairJoint-6ddec442-031b-4fbb-8e20-724a9fd347f7", "J_Bip_C_Head", -0.10255062580109);
		addPin("HairJoint-6ddec442-031b-4fbb-8e20-724a9fd347f7", -0.10341578722, 1.47437155246735, -0.0284845046699,
				-0.0191090721637, -0.0574304908514, 0.99798369407654, 0.01910747215152);
		addBone("HairJoint-2e73f43d-e0b8-451b-b595-fd9f7e9436fd", "HairJoint-6ddec442-031b-4fbb-8e20-724a9fd347f7",
				0.08167374134064);
		addPin("HairJoint-2e73f43d-e0b8-451b-b595-fd9f7e9436fd", -0.10637307167053, 1.39269781112671, -0.03797590360045,
				-0.06303469836712, -0.10611267387867, 0.99035024642944, 0.06303268671036);
		addBone("HairJoint-e926483b-33cf-4106-ad23-b2b099abd7a2", "HairJoint-2e73f43d-e0b8-451b-b595-fd9f7e9436fd",
				0.07975625991821);
		addPin("HairJoint-e926483b-33cf-4106-ad23-b2b099abd7a2", -0.11554300785065, 1.3129415512085, -0.05591929331422,
				-0.08977039158344, -0.15201735496521, 0.98019063472748, 0.08976820111275);
		addBone("HairJoint-e929411f-bd08-4281-81ef-4fa7f2ca62a2", "HairJoint-e926483b-33cf-4106-ad23-b2b099abd7a2",
				0.07715976238251);
		addPin("HairJoint-e929411f-bd08-4281-81ef-4fa7f2ca62a2", -0.12777835130692, 1.23578178882599, -0.08176870644093,
				-0.08781105279922, -0.05150248110294, 0.99092197418213, 0.0878089889884);
		addBone("HairJoint-742f4b4e-a03e-493f-891d-1ff5498daca6", "HairJoint-e929411f-bd08-4281-81ef-4fa7f2ca62a2",
				0.08032941818237);
		addPin("HairJoint-742f4b4e-a03e-493f-891d-1ff5498daca6", -0.14131148159504, 1.15545237064362, -0.09140645712614,
				0.0175152849406, 0.07803330570459, 0.99664294719696, -0.01751764118671);
		addBone("HairJoint-cfe8d45a-8831-4e5a-b98b-03f39657ab2b", "HairJoint-742f4b4e-a03e-493f-891d-1ff5498daca6",
				0.08000671863556);
		addPin("HairJoint-cfe8d45a-8831-4e5a-b98b-03f39657ab2b", -0.13826011121273, 1.07544565200806, -0.07885053753853,
				0.15111747384071, 0.22463308274746, 0.95071887969971, -0.15111947059631);
		addBone("HairJoint-24fcebff-51a6-45ae-9472-f412a88dab33", "HairJoint-cfe8d45a-8831-4e5a-b98b-03f39657ab2b",
				0.06805777549744);
		addPin("HairJoint-24fcebff-51a6-45ae-9472-f412a88dab33", -0.10993061959743, 1.00738787651062, -0.04843033477664,
				0.15111801028252, 0.2246331423521, 0.95071882009506, -0.1511193215847);
		addBone("J_Bip_L_Shoulder", "J_Bip_C_UpperChest", -0.08726382255554);
		addPin("J_Bip_L_Shoulder", 0.02216794714332, 1.27226006984711, -0.01134995184839, 0.47743839025497,
				0.43279156088829, 0.59732419252396, -0.47743883728981);
		addBone("J_Bip_L_UpperArm", "J_Bip_L_Shoulder", 0.01486933231354);
		addPin("J_Bip_L_UpperArm", 0.10846266150475, 1.25739073753357, -0.00598625466228, 0.49530827999115,
				0.42942985892296, 0.57002687454224, -0.49530711770058);
		addBone("J_Sec_L_TopsUpperArmInside", "J_Bip_L_UpperArm", 0.08535051345825);
		addPin("J_Sec_L_TopsUpperArmInside", 0.22077125310898, 1.17204022407532, -0.01299411617219, 0.49658834934235,
				0.56402391195297, 0.43436998128891, -0.49658814072609);
		addBone("J_Sec_L_TopsUpperArmInside_end", "J_Sec_L_TopsUpperArmInside", -0.01431715488434);
		addPin("J_Sec_L_TopsUpperArmInside_end", 0.33044555783272, 1.18635737895966, -0.01334907952696,
				0.49658808112144, 0.56402367353439, 0.43437024950981, -0.49658846855164);
		addBone("J_Sec_L_TopsUpperArmOutside", "J_Bip_L_UpperArm", -0.04578936100006);
		addPin("J_Sec_L_TopsUpperArmOutside", 0.12773753702641, 1.30318009853363, -0.00120040401816, 0.49098947644234,
				0.57456856966019, 0.43327802419662, -0.4909892976284);
		addBone("J_Sec_L_TopsUpperArmOutside_end", "J_Sec_L_TopsUpperArmOutside", -0.0251886844635);
		addPin("J_Sec_L_TopsUpperArmOutside_end", 0.30279988050461, 1.32836878299713, 0.00158641883172,
				0.49098914861679, 0.57456833124161, 0.43327841162682, -0.4909895658493);
		addBone("J_Bip_L_LowerArm", "J_Bip_L_UpperArm", 0.01019752025604);
		addPin("J_Bip_L_LowerArm", 0.32746922969818, 1.24719321727753, -0.00414886511862, 0.47899118065834,
				0.51911604404449, 0.52120423316956, -0.47899085283279);
		addBone("J_Bip_L_Hand", "J_Bip_L_LowerArm", 0.00046575069427);
		addPin("J_Bip_L_Hand", 0.54104334115982, 1.24672746658325, 0.01348091475666, 0.49284273386002, 0.54058188199997,
				0.47115191817284, -0.49284195899963);
		addBone("J_Bip_L_Index1", "J_Bip_L_Hand", -0.00556218624115);
		addPin("J_Bip_L_Index1", 0.60494875907898, 1.2522896528244, 0.03492326289415, 0.45962011814117,
				0.53547084331512, 0.53923046588898, -0.45962023735046);
		addBone("J_Bip_L_Index2", "J_Bip_L_Index1", 0.00013411045074);
		addPin("J_Bip_L_Index2", 0.6377694606781, 1.25215554237366, 0.04007217660546, 0.47077569365501,
				0.51177060604095, 0.54298382997513, -0.47077563405037);
		addBone("J_Bip_L_Index3", "J_Bip_L_Index2", 0.00067353248596);
		addPin("J_Bip_L_Index3", 0.65808314085007, 1.2514820098877, 0.04237347468734, 0.47603705525398,
				0.50460296869278, 0.54051214456558, -0.47603693604469);
		addBone("J_Bip_L_Index3_end", "J_Bip_L_Index3", 0.0009092092514);
		addPin("J_Bip_L_Index3_end", 0.68219250440598, 1.25057280063629, 0.04460908472538, 0.47603714466095,
				0.50460296869278, 0.54051208496094, -0.47603699564934);
		addBone("J_Bip_L_Little1", "J_Bip_L_Hand", -0.00312507152557);
		addPin("J_Bip_L_Little1", 0.60430461168289, 1.24985253810883, -0.01331261172891, 0.49980464577675,
				0.49582704901695, 0.50452566146851, -0.49980476498604);
		addBone("J_Bip_L_Little2", "J_Bip_L_Little1", 0.00027310848236);
		addPin("J_Bip_L_Little2", 0.63570296764374, 1.24957942962646, -0.01329045463353, -0.51250511407852,
				-0.50606274604797, -0.46752262115479, 0.51250517368317);
		addBone("J_Bip_L_Little3", "J_Bip_L_Little2", -0.00067889690399);
		addPin("J_Bip_L_Little3", 0.65376210212708, 1.25025832653046, -0.01423383504152, -0.50598925352097,
				-0.52220964431763, -0.46394699811935, 0.50598937273026);
		addBone("J_Bip_L_Little3_end", "J_Bip_L_Little3", -0.0011146068573);
		addPin("J_Bip_L_Little3_end", 0.67312616109848, 1.25137293338776, -0.01476733200252, -0.50598925352097,
				-0.52220964431763, -0.46394702792168, 0.50598937273026);
		addBone("J_Bip_L_Middle1", "J_Bip_L_Hand", -0.00837290287018);
		addPin("J_Bip_L_Middle1", 0.60715484619141, 1.25510036945343, 0.01826073229313, 0.48292648792267,
				0.49855327606201, 0.53386187553406, -0.4829266667366);
		addBone("J_Bip_L_Middle2", "J_Bip_L_Middle1", 0.00134885311127);
		addPin("J_Bip_L_Middle2", 0.64405542612076, 1.25375151634216, 0.02069870010018, 0.48689785599709,
				0.45852869749069, 0.56179410219193, -0.48689770698547);
		addBone("J_Bip_L_Middle3", "J_Bip_L_Middle2", 0.00240528583527);
		addPin("J_Bip_L_Middle3", 0.66673827171326, 1.2513462305069, 0.02163603156805, 0.49028548598289,
				0.47683942317963, 0.54024505615234, -0.49028521776199);
		addBone("J_Bip_L_Middle3_end", "J_Bip_L_Middle3", 0.0016143321991);
		addPin("J_Bip_L_Middle3_end", 0.69170010089874, 1.2497318983078, 0.02249852009118, 0.49028542637825,
				0.47683936357498, 0.54024511575699, -0.49028527736664);
		addBone("J_Bip_L_Ring1", "J_Bip_L_Hand", -0.00830614566803);
		addPin("J_Bip_L_Ring1", 0.60772401094437, 1.25503361225128, 0.00251972768456, 0.49868109822273,
				0.49343964457512, 0.50906932353973, -0.49868127703667);
		addBone("J_Bip_L_Ring2", "J_Bip_L_Ring1", 0.00053787231445);
		addPin("J_Bip_L_Ring2", 0.64204692840576, 1.25449573993683, 0.00269219651818, 0.49654057621956,
				0.52069848775864, 0.48555946350098, -0.49654057621956);
		addBone("J_Bip_L_Ring3", "J_Bip_L_Ring2", -0.00070059299469);
		addPin("J_Bip_L_Ring3", 0.66184335947037, 1.25519633293152, 0.00294092018157, -0.50152564048767,
				-0.50623708963394, -0.49057939648628, 0.50152570009232);
		addBone("J_Bip_L_Ring3_end", "J_Bip_L_Ring3", -0.00033342838287);
		addPin("J_Bip_L_Ring3_end", 0.68319547176361, 1.25552976131439, 0.00280516268685, -0.50152558088303,
				-0.50623708963394, -0.49057939648628, 0.50152564048767);
		addBone("J_Bip_L_Thumb1", "J_Bip_L_Hand", 0.00691187381744);
		addPin("J_Bip_L_Thumb1", 0.54307508468628, 1.23981559276581, 0.03121480345726, 0.26469641923904,
				0.63318014144897, 0.67746180295944, -0.26469638943672);
		addBone("J_Bip_L_Thumb2", "J_Bip_L_Thumb1", 0.00270068645477);
		addPin("J_Bip_L_Thumb2", 0.57536214590073, 1.23711490631104, 0.06461591273546, 0.28867197036743,
				0.62470632791519, 0.66564190387726, -0.28867185115814);
		addBone("J_Bip_L_Thumb3", "J_Bip_L_Thumb2", 0.00151181221008);
		addPin("J_Bip_L_Thumb3", 0.5966859459877, 1.23560309410095, 0.083650611341, 0.26365730166435, 0.64171135425568,
				0.67020618915558, -0.26365718245506);
		addBone("J_Bip_L_Thumb3_end", "J_Bip_L_Thumb3", 0.00080955028534);
		addPin("J_Bip_L_Thumb3_end", 0.61166936159134, 1.23479354381561, 0.09926944971085, 0.26365718245506,
				0.64171147346497, 0.67020618915558, -0.2636570930481);
		addBone("J_Bip_R_Shoulder", "J_Bip_C_UpperChest", -0.08726394176483);
		addPin("J_Bip_R_Shoulder", -0.02260333113372, 1.2722601890564, -0.01134993322194, -0.47743839025497,
				0.4327917098999, 0.59732419252396, 0.47743865847588);
		addBone("J_Bip_R_UpperArm", "J_Bip_R_Shoulder", 0.01486933231354);
		addPin("J_Bip_R_UpperArm", -0.10889802128077, 1.25739085674286, -0.00598619971424, -0.49530026316643,
				0.42943379282951, 0.57003682851791, 0.49530026316643);
		addBone("J_Sec_R_TopsUpperArmInside", "J_Bip_R_UpperArm", 0.08535277843475);
		addPin("J_Sec_R_TopsUpperArmInside", -0.22120848298073, 1.17203807830811, -0.012988592498, -0.49658885598183,
				0.56402456760406, 0.43436828255653, 0.49658837914467);
		addBone("J_Sec_R_TopsUpperArmInside_end", "J_Sec_R_TopsUpperArmInside", -0.01431751251221);
		addPin("J_Sec_R_TopsUpperArmInside_end", -0.33088293671608, 1.18635559082031, -0.01334381103516,
				-0.49658861756325, 0.56402432918549, 0.43436861038208, 0.49658861756325);
		addBone("J_Sec_R_TopsUpperArmOutside", "J_Bip_R_UpperArm", -0.04578721523285);
		addPin("J_Sec_R_TopsUpperArmOutside", -0.12817454338074, 1.30317807197571, -0.00119556486607, -0.49098998308182,
				0.57456862926483, 0.43327707052231, 0.49098950624466);
		addBone("J_Sec_R_TopsUpperArmOutside_end", "J_Sec_R_TopsUpperArmOutside", -0.02518856525421);
		addPin("J_Sec_R_TopsUpperArmOutside_end", -0.3032369017601, 1.32836663722992, 0.00159095786512,
				-0.49098983407021, 0.57456827163696, 0.43327739834785, 0.49098989367485);
		addBone("J_Bip_R_LowerArm", "J_Bip_R_UpperArm", 0.01019728183746);
		addPin("J_Bip_R_LowerArm", -0.32790479063988, 1.2471935749054, -0.0041490867734, -0.47899189591408,
				0.5191165804863, 0.52120250463486, 0.47899141907692);
		addBone("J_Bip_R_Hand", "J_Bip_R_LowerArm", 0.00046491622925);
		addPin("J_Bip_R_Hand", -0.54147881269455, 1.24672865867615, 0.01348017528653, -0.49284282326698,
				0.54058331251144, 0.47114858031273, 0.49284347891808);
		addBone("J_Bip_R_Index1", "J_Bip_R_Hand", -0.00556218624115);
		addPin("J_Bip_R_Index1", -0.60538429021835, 1.2522908449173, 0.03492238745093, -0.45961874723434,
				0.53547394275665, 0.53922998905182, 0.45961862802505);
		addBone("J_Bip_R_Index2", "J_Bip_R_Index1", 0.00013434886932);
		addPin("J_Bip_R_Index2", -0.63820499181747, 1.25215649604797, 0.04007149860263, -0.47077393531799,
				0.51177233457565, 0.54298537969589, 0.47077366709709);
		addBone("J_Bip_R_Index3", "J_Bip_R_Index2", 0.00067329406738);
		addPin("J_Bip_R_Index3", -0.65851855278015, 1.25148320198059, 0.04237294569612, -0.47603565454483,
				0.50460451841354, 0.54051339626312, 0.47603532671928);
		addBone("J_Bip_R_Index3_end", "J_Bip_R_Index3", 0.00090932846069);
		addPin("J_Bip_R_Index3_end", -0.68262791633606, 1.2505738735199, 0.04460867866874, -0.47603571414948,
				0.50460451841354, 0.54051333665848, 0.47603538632393);
		addBone("J_Bip_R_Little1", "J_Bip_R_Hand", -0.00312542915344);
		addPin("J_Bip_R_Little1", -0.60474002361298, 1.24985408782959, -0.01331354305148, -0.49979975819588,
				0.49583587050438, 0.50452679395676, 0.49979969859123);
		addBone("J_Bip_R_Little2", "J_Bip_R_Little1", 0.00027298927307);
		addPin("J_Bip_R_Little2", -0.63613837957382, 1.24958109855652, -0.01329075638205, -0.51250022649765,
				0.5060743689537, 0.46752122044563, 0.51249998807907);
		addBone("J_Bip_R_Little3", "J_Bip_R_Little2", -0.00067913532257);
		addPin("J_Bip_R_Little3", -0.65419763326645, 1.25026023387909, -0.01423378847539, -0.505983710289,
				0.52222394943237, 0.46394294500351, 0.505983710289);
		addBone("J_Bip_R_Little3_end", "J_Bip_R_Little3", -0.00111508369446);
		addPin("J_Bip_R_Little3_end", -0.67356157302856, 1.25137531757355, -0.0147668980062, -0.50598382949829,
				0.52222383022308, 0.46394291520119, 0.50598376989365);
		addBone("J_Bip_R_Middle1", "J_Bip_R_Hand", -0.00837290287018);
		addPin("J_Bip_R_Middle1", -0.60759037733078, 1.25510156154633, 0.01825982891023, -0.48292729258537,
				0.49855598807335, 0.53385818004608, 0.48292717337608);
		addBone("J_Bip_R_Middle2", "J_Bip_R_Middle1", 0.0013484954834);
		addPin("J_Bip_R_Middle2", -0.64449113607407, 1.25375306606293, 0.02069776691496, -0.48689869046211,
				0.45853081345558, 0.56179094314575, 0.48689842224121);
		addBone("J_Bip_R_Middle3", "J_Bip_R_Middle2", 0.00240540504456);
		addPin("J_Bip_R_Middle3", -0.66717433929443, 1.25134766101837, 0.0216350518167, -0.49028620123863,
				0.476841121912, 0.54024237394333, 0.49028578400612);
		addBone("J_Bip_R_Middle3_end", "J_Bip_R_Middle3", 0.00161397457123);
		addPin("J_Bip_R_Middle3_end", -0.69213628768921, 1.24973368644714, 0.02249752357602, -0.49028620123863,
				0.476841121912, 0.54024237394333, 0.49028587341309);
		addBone("J_Bip_R_Ring1", "J_Bip_R_Hand", -0.00830614566803);
		addPin("J_Bip_R_Ring1", -0.60815942287445, 1.25503480434418, 0.00251880753785, -0.49868026375771,
				0.49344235658646, 0.50906842947006, 0.49868020415306);
		addBone("J_Bip_R_Ring2", "J_Bip_R_Ring1", 0.00053787231445);
		addPin("J_Bip_R_Ring2", -0.6424822807312, 1.25449693202972, 0.00269140861928, -0.49654003977776,
				0.52069616317749, 0.48556324839592, 0.49653986096382);
		addBone("J_Bip_R_Ring3", "J_Bip_R_Ring2", -0.00070023536682);
		addPin("J_Bip_R_Ring3", -0.6622788310051, 1.25519716739655, 0.00294020283036, -0.50152486562729,
				0.50624078512192, 0.49057731032372, 0.501524746418);
		addBone("J_Bip_R_Ring3_end", "J_Bip_R_Ring3", -0.00033366680145);
		addPin("J_Bip_R_Ring3_end", -0.68363082408905, 1.255530834198, 0.00280451425351, -0.50152486562729,
				0.50624084472656, 0.49057731032372, 0.50152468681335);
		addBone("J_Bip_R_Thumb1", "J_Bip_R_Hand", 0.00691187381744);
		addPin("J_Bip_R_Thumb1", -0.54351061582565, 1.2398167848587, 0.03121404349804, -0.26459637284279,
				0.63341528177261, 0.6773202419281, 0.26459610462189);
		addBone("J_Bip_R_Thumb2", "J_Bip_R_Thumb1", 0.00267791748047);
		addPin("J_Bip_R_Thumb2", -0.57578784227371, 1.23713886737823, 0.06462660431862, -0.28859686851501,
				0.62492597103119, 0.66550087928772, 0.28859654068947);
		addBone("J_Bip_R_Thumb3", "J_Bip_R_Thumb2", 0.00149869918823);
		addPin("J_Bip_R_Thumb3", -0.59710729122162, 1.23564016819, 0.08366705477238, -0.26360663771629,
				0.64191454648972, 0.67005145549774, 0.26360639929771);
		addBone("J_Bip_R_Thumb3_end", "J_Bip_R_Thumb3", 0.00079953670502);
		addPin("J_Bip_R_Thumb3_end", -0.61208832263947, 1.23484063148499, 0.09928868710995, -0.26360622048378,
				0.64191478490829, 0.67005169391632, 0.26360565423965);
		addBone("J_Bip_L_UpperLeg", "J_Bip_C_Hips", 0.03995370864868);
		addPin("J_Bip_L_UpperLeg", 0.07690473645926, 0.85403835773468, 0.00224072486162, 0.10830543935299,
				0.02118011564016, 0.98797333240509, -0.1083053573966);
		addBone("J_Sec_L_TopsUpperLegBack", "J_Bip_L_UpperLeg", -0.00405633449554);
		addPin("J_Sec_L_TopsUpperLegBack", 0.07774490118027, 0.85809469223022, -0.11608727276325, 0.02984633855522,
				-0.09019942581654, 0.99502885341644, -0.02984628640115);
		addBone("J_Sec_R_TopsUpperLegBack_end", "J_Sec_L_TopsUpperLegBack", 0.1204714179039);
		addPin("J_Sec_R_TopsUpperLegBack_end", 0.08437141031027, 0.73762327432632, -0.13832828402519, 0.02984633482993,
				-0.0901994407177, 0.99502885341644, -0.02984631992877);
		addBone("J_Sec_L_TopsUpperLegFront", "J_Bip_L_UpperLeg", 0.01325535774231);
		addPin("J_Sec_L_TopsUpperLegFront", 0.0754678696394, 0.84078299999237, 0.13355356454849, 0.02232901565731,
				0.00437001371756, 0.999491751194, -0.02232908271253);
		addBone("J_Sec_L_TopsUpperLegFront_end", "J_Sec_L_TopsUpperLegFront", 0.11202675104141);
		addPin("J_Sec_L_TopsUpperLegFront_end", 0.08049532771111, 0.72875624895096, 0.1344213783741, 0.02232902683318,
				0.00436999928206, 0.999491751194, -0.02232907898724);
		addBone("J_Sec_L_TopsUpperLegSide", "J_Bip_L_UpperLeg", 0.01346909999847);
		addPin("J_Sec_L_TopsUpperLegSide", 0.18175503611565, 0.84056925773621, 0.00264725275338, 0.09304130077362,
				0.00057707115775, 0.99130535125732, -0.09304118156433);
		addBone("J_Sec_L_TopsUpperLegSide_end", "J_Sec_L_TopsUpperLegSide", 0.1098285317421);
		addPin("J_Sec_L_TopsUpperLegSide_end", 0.20238348841667, 0.73074072599411, 0.00084010860883, 0.09304139763117,
				0.0005771862343, 0.99130535125732, -0.09304122626781);
		addBone("J_Bip_L_LowerLeg", "J_Bip_L_UpperLeg", 0.35218977928162);
		addPin("J_Bip_L_LowerLeg", 0.05663858726621, 0.50184857845306, -0.00408475659788, -0.01279210206121,
				-0.02534101903439, 0.9995151758194, 0.01279214303941);
		addBone("J_Bip_L_Foot", "J_Bip_L_LowerLeg", 0.41464307904243);
		addPin("J_Bip_L_Foot", 0.04628748819232, 0.08720549941063, -0.02525936067104, 0.00420861784369,
				0.50143563747406, 0.865174472332, -0.00420854846016);
		addBone("J_Bip_L_ToeBase", "J_Bip_L_Foot", 0.0633649379015);
		addPin("J_Bip_L_ToeBase", 0.04775379225612, 0.02384056150913, 0.08533831685781, 0.00319094979204,
				0.6911655664444, 0.72268235683441, -0.00319194467738);
		addBone("J_Bip_L_ToeBase_end", "J_Bip_L_ToeBase", 0.00201562419534);
		addPin("J_Bip_L_ToeBase_end", 0.04816200211644, 0.0218249373138, 0.13052560389042, 0.00319149717689,
				0.69116550683975, 0.72268241643906, -0.00319141964428);
		addBone("J_Bip_R_UpperLeg", "J_Bip_C_Hips", 0.03995406627655);
		addPin("J_Bip_R_UpperLeg", -0.07734008878469, 0.85403800010681, 0.00224075419828, -0.10830518603325,
				0.02117970399559, 0.98797339200974, 0.10830502957106);
		addBone("J_Sec_R_TopsUpperLegBack", "J_Bip_R_UpperLeg", -0.0040562748909);
		addPin("J_Sec_R_TopsUpperLegBack", -0.07817995548248, 0.85809427499771, -0.11608725786209, -0.02984535507858,
				-0.09019961953163, 0.99502891302109, 0.02984544821084);
		addBone("J_Sec_R_TopsUpperLegBack_end 1", "J_Sec_R_TopsUpperLegBack", 0.12047129869461);
		addPin("J_Sec_R_TopsUpperLegBack_end 1", -0.08480626344681, 0.7376229763031, -0.13832831382751,
				-0.02984539791942, -0.0901994407177, 0.99502897262573, 0.02984543517232);
		addBone("J_Sec_R_TopsUpperLegFront", "J_Bip_R_UpperLeg", 0.01325541734695);
		addPin("J_Sec_R_TopsUpperLegFront", -0.07590349763632, 0.84078258275986, 0.13355354964733, -0.0223283264786,
				0.00437000580132, 0.999491751194, 0.02232843823731);
		addBone("J_Sec_R_TopsUpperLegFront_end", "J_Sec_R_TopsUpperLegFront", 0.11202698945999);
		addPin("J_Sec_R_TopsUpperLegFront_end", -0.080930814147, 0.72875559329987, 0.13442140817642, -0.02232847362757,
				0.0043701082468, 0.999491751194, 0.02232845686376);
		addBone("J_Sec_R_TopsUpperLegSide", "J_Bip_R_UpperLeg", 0.0134693980217);
		addPin("J_Sec_R_TopsUpperLegSide", -0.18219046294689, 0.84056860208511, 0.00264702318236, -0.09304068982601,
				0.00057671644026, 0.99130547046661, 0.09304063022137);
		addBone("J_Sec_R_TopsUpperLegSide_end", "J_Sec_R_TopsUpperLegSide", 0.1098285317421);
		addPin("J_Sec_R_TopsUpperLegSide_end", -0.20281875133514, 0.73074007034302, 0.00083982723299, -0.09304069727659,
				0.00057679298334, 0.99130547046661, 0.09304060786963);
		addBone("J_Bip_R_LowerLeg", "J_Bip_R_UpperLeg", 0.35218954086304);
		addPin("J_Bip_R_LowerLeg", -0.05707355588675, 0.50184845924377, -0.00408472726122, 0.01279335655272,
				-0.02534126117826, 0.99951511621475, -0.01279333699495);
		addBone("J_Bip_R_Foot", "J_Bip_R_LowerLeg", 0.41464340686798);
		addPin("J_Bip_R_Foot", -0.04672152549028, 0.08720505237579, -0.02525956369936, -0.00420677755028,
				0.50143599510193, 0.86517429351807, 0.00420681666583);
		addBone("J_Bip_R_ToeBase", "J_Bip_R_Foot", 0.06336487829685);
		addPin("J_Bip_R_ToeBase", -0.04818721488118, 0.02384017407894, 0.08533815294504, -0.00318916025572,
				0.69116473197937, 0.72268319129944, 0.00319088529795);
		addBone("J_Bip_R_ToeBase_end", "J_Bip_R_ToeBase", 0.00201574340463);
		addPin("J_Bip_R_ToeBase_end", -0.04859524592757, 0.02182443067431, 0.13052552938461, -0.00318998773582,
				0.69116461277008, 0.72268331050873, 0.00319009274244);
		Bone bone = boneMap.get("J_Bip_C_Hips");
		bone.rotAboutFrameX(.01f);
		activePin = bone.getIKPin();
	}

	public void updatePinList() {
		pins.clear();
		recursivelyAddToPinnedList(pins, simpleArmature.getRootBone());
	}

	public void recursivelyAddToPinnedList(ArrayList<IKPin> pins, Bone descendedFrom) {
		@SuppressWarnings("unchecked")
		ArrayList<Bone> pinnedChildren = (ArrayList<Bone>) descendedFrom.getMostImmediatelyPinnedDescendants();
		for (Bone b : pinnedChildren) {
			pins.add(b.getIKPin());
		}
		for (Bone b : pinnedChildren) {
			ArrayList<Bone> children = b.getChildren();
			for (Bone b2 : children) {
				recursivelyAddToPinnedList(pins, b2);
			}
		}
	}

}
